
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Video Call</title>

  <meta content="width=device-width, initial-scale=1" name="viewport" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel='stylesheet' href='assets/css/app.css' type="text/css">
  <!-- <script src="jquery-3.4.1.min.js"></script> -->
  <script src="https://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>


<!------------------------------------------------------------------------------------>

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="html2canvas-master/dist/html2canvas.js"></script>
  <script src='/socket.io/socket.io.js'></script>
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/7.3.0/adapter.min.js" integrity="sha256-2qQheewaqnZlXJ3RJRghVUwD/3fD9HNqxh4C+zvgmF4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
</head>
<body>
    <div class="">
       
       
           
      <nav class="navbar navbar-expand-sm navbar-dark bg-white d-flex justify-content-between">
        <!-- Brand -->
        <!-- <a class="navbar-brand" href="#">Logo</a> -->
        <img src="./assets/images/Group 548@3x.png"
            srcset="img/group-548@2x.png 2x,
                    img/group-548@3x.png 3x"
            class="Group-548">
      
        <!-- Links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="sass.html" style="font-size: 20px;color: black;" class="active" id="join">JOIN A MEETING</a>
          </li>
          &nbsp; &nbsp; &nbsp; &nbsp;
          <li class="nav-item">
            <a href="#" style="font-size: 20px;color: black;" id="host">HOSTING A MEETING</a>
            </li>
            &nbsp; &nbsp; &nbsp; &nbsp;
            <li class="nav-item">
              <a href="" style="font-size: 20px;color: black;" id="schedule">SCHEDULE A MEETING</a>
            </li>
            &nbsp; &nbsp; &nbsp; &nbsp;
            <li class="nav-item"><a href="#" style="font-size: 10px;color: black;" style="color: blueviolet;"id="signinpopup" >SIGN IN</a></li>
          <!-- Dropdown -->
          &nbsp; &nbsp; &nbsp; &nbsp;
          <li class="nav-item dropdown">
          <a href="" class="nav-link dropdown-toggle" style="font-size: 10px;color: black;" style="color: blueviolet;"id="navbardrop" data-toggle="dropdown" ></a>
    
            </a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="#" id="startmeeting">Start meeting</a>
              <a class="dropdown-item" href="#" id="signout">Sign out</a>
              <a class="dropdown-item" href="#">Link 3</a>
            </div>
          </li>
          <li class="nav-item"><button type="button" class="btn btn-primary" style="background-color: blueviolet;" id="signup" onclick="buttonsignin()">SIGN UP</button></li>
          &nbsp;   &nbsp;
        </ul>
      </nav>


             


              <div class="hero-image">
            </div>
            











            <div >
            
            <div class="row col-md-12 " style="margin-bottom: -70px;">
              
              <div  class="my-5 ml-5"><p class="Be-together-in-the-moment" style="top:20px"><b>BE TOGETHER  IN THE MOMENT</b> </p>
                <p class="ml-2" style="font-size: 20px;">Simple, high quality video calls on Android phones, iPhones, tablets,<br/> 
                  computers, and Smart Displays like the Google Nest Hub Max.</p>
                  <br/>
                  <div class="row ml-5 col-md-12">
                    <div class="col text-center">                     
                      <img src="assets/images/Group 545@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;">Set up group for your Meeting</p>

                      <a href="" >know more</a>

                      </div>
                      <div class="col text-center"> 
                      <img src="assets/images/Group 546@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;">Send a files, photos and videos</p>
                      <a href="" >know more</a>
                      </div>
                      <div class="col text-center"> 
                      <img src="assets/images/Group 547@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;" >Your calls and messages stay private </p>                      
                      <a href="">know more</a>
                      </div>
                    </div>
                  
                   
                  
                  
                  
                </div>
               
        
                <div class="col-md-3 offset-md-8" id="signview" style=" position: absolute;;
                top:-30%">
                  <div class="card form-holder">
          <div class="card-body">
            <br/>
                  <h3>Welcome to face chat</h3>
                  <form   id="contactForm1">
                    <div class="form-group">
                      <input type="text" name="" id="email" class="form-control" placeholder="Email id"/>
                    </div>
                    <div class="form-group">
                      <input type="password" name="" id="password" class="form-control" placeholder="Password"/>
                    </div>
                   

                    



                    <div class="row col-md-12">
                      <div class="checkbox col-sm-6 ">
                        <label><input type="checkbox" name="remember"> Remember me</label>
                      </div>

                        <!-- <div class="col-sm-6">
                           <input type="checkbox" value="lsRememberMe"  style="color: #000; " id="rememberMe"/> <label for="rememberMe">Remember me</label>

                        </div> -->
                        <label style="float:right;font-size:12px; cursor:pointer;" onClick="">Forgot Password?</label>
                      </div>
                    
                  
                    <div class="wrapper">
                        <button style="width: 250px;height: 50px;background-color: blueviolet;"class="btn btn-primary" id="signin1"  >Sign in</button>
                    </div> 
                    <br/>
                    <div class="wrapper">

                    <h4 style="align-self: center;" onclick="signup()">SIGN UP</h4>
                    </div>
                    <!-- <div class="separator">or</div>
                    <div class="wrapper">
                        <button style="width: 250px;height: 50px;background-color: white;color: black;" class="btn">JOIN A MEETING</button>
                    </div>  -->
                  </div>
                </form>
                    </div>
                  </div>
                 

                </div>
               <div style="margin-bottom: -40px;">
                <img src="assets/images/Mask Group 1.png" class="responsive" >
               </div>

                <footer class="footer bg-dark col-md-12" style="padding:.1%;backface-visibility:hidden">
                  <!-- <div  class="" style="margin-top: -110px;"> -->
                  
    
                  <!-- </div> -->
                  
                  <div class="col-md-12 mt-5">
                    <div class="row">
                      <div class="float-left ml-4">
                        <img src="assets/images/Group 4.png">
                      </div>
                      <div class="col-sm-1">
                        
                      </div>
                      <div class="col-lg">
                        <div class="row"><p class="Privacy">Privacy</p> <div class="v1"></div> <p class="Privacy">Terms</p> <div class="v1"></div> <p class="Privacy">About</p> <div class="v1"></div> <p class="Privacy">FaceChat</p> <div class="v1"></div> <p class="Privacy">Help</p>  <div class="v1"></div>  <p class="Privacy">FAQ's</p></div>
                      </div>
                      <div class="float-right">
                        <img src="assets/images/sort@2x.png" onclick="scrolltop()" style="width: 60px;height: 60px;">
                      </div>
                      
                    </div>
                  </div>
                </footer>
              

               
              
              </div>
            </div>

             




               
          

               
              </div>



            
  <div class="modal" id="myModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
      <div class="modal-content">
                  
                    <div class="modal-header">
                      <!-- <h4 class="modal-title">Users Status</h4> -->
                      <button type="button" class="close" data-dismiss="modal">Ã—</button>
                      <!-- <button class="close modalMinimize"> <i class='fa fa-minus'></i> </button> -->
                    </div>
                    
                    <div class="modal-body">
                      <div class="col-12 text-center" id='room-created'></div>

                      
                     
                    </div>
                    
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
              
                  </div>
                </div>  
              </div>



              



              
     
      
<!-- </div> -->


<script>
function scrolltop() { 
            window.scrollTo(0, 0); 
        }

    console.log(sessionStorage.getItem("email"))



//    var socket = io()
//   socket.on('cron', function(data) {
//     console.log(data,"crom") 
//     console.log(sessionStorage.getItem("email"))

//       cronfun(data.time,data.email)
      
//            });
// function cronfun(param1,param2){
//   if(sessionStorage.getItem("email") == param2){
//   Swal.fire("You scheuled a meeting at"+" "+param1)
//   }
  
  

// }

  var link;
  sessionStorage.removeItem("link")
  // alert(sessionStorage.getItem("link"))

      document.querySelector('#signview').style.display ="none"
      document.getElementById('navbardrop').style.display ="none"

      //======================================start meeting==========================================//
      document.getElementById("startmeeting").addEventListener('click', (ev)=>{
        ev.preventDefault();

        obj={
          meetingID:sessionStorage.getItem("meetingid")
        }
        $.ajax({
                type: "post",
                // url:"https://rapidqube-conference.herokuapp.com/meetingstarted",
                url:"https://rapidqube-conference.herokuapp.com/meetingstarted",

                data: JSON.stringify(obj),
                contentType: 'application/json',
                

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  if(result.result =="success"){
                    // window.location =sessionStorage.getItem("url")
                    window.location ="./userpage1.html"

                  }
                  else{
                    Swal.fire("Something Went Wrong")
                  }
                }


      })
    })


      //================================join a meeting========================================//
      document.getElementById("join").addEventListener('click', (ev)=>{
        ev.preventDefault();
        window.location ="./joinmeeting.html"
      })

      document.getElementById("signinpopup").addEventListener('click', (ev)=>{
        ev.preventDefault();
    document.querySelector('#signview').style.display ="block"
    return false;
  })
  //===================================sign out========================================================//
  document.getElementById("signout").addEventListener('click', (ev)=>{
        ev.preventDefault();

        Swal.fire({
 
 text: "Are sure want to sign out",
 

 icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes'
}).then((result) => {
  if(result.value){
    sessionStorage.removeItem("email")
    sessionStorage.removeItem("password")
    sessionStorage.removeItem("meetingid")
    sessionStorage.removeItem("url")




  window.location = "./index.html"

  }
  console.log(result,"result====>>>")

})        
  })
  //==========================================sign up=======================================================================//
  function buttonsignin(){
    window.location = "./singup.html";
  }
  //================================================host a meeting click==========================================//
  document.getElementById("host").addEventListener('click', (ev)=>{
        ev.preventDefault();
        
    var usernamedisplay = document.getElementById("navbardrop")
    if(window.getComputedStyle(usernamedisplay).display === "block"){
      sessionStorage.removeItem("link")




      var obj ={
  email: sessionStorage.getItem("email"),
  password : sessionStorage.getItem("password"),

}
$.ajax({
                type: "post",
                // url:"https://rapidqube-conference.herokuapp.com/signin",
                url:"https://rapidqube-conference.herokuapp.com/signin",
                data: JSON.stringify(obj),
                contentType: 'application/json',              

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  console.log(result,"dfdsffffffffffffff") 
                    var firstname = result.result.firstname;
                    var roomName = result.result.groupname
                    var id = result.result._id      
                    sessionStorage.setItem("username",firstname)


                       roomLink = `${location.origin}?room=${roomName.trim().replace(' ', '_')}_${generateRandomString()}/?${id}`;
                       console.log(roomLink,"roomlink+++++++")
                      // if(sessionStorage.getItem("link") == "host"){
                       document.querySelector('#room-created').innerHTML = `Room successfully created. Click <a href='${roomLink}' onclick="mytest( '${roomLink}','${id}')">here</a> to enter room. 
                Share the room link <a href=""> ${roomLink}</a> with your partners.`;
                       $('#myModal').modal('show');
    
               
                 
                  
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                    
                }
            })
    }
    else{
    Swal.fire({
 
 text: "Kindly signin",
 

 confirmButtonColor: '#3085d6',
 
 confirmButtonText: 'OK'
}).then((result) => {
  link = "host"
        sessionStorage.setItem("link",link)
    // alert("sdfdfdf")
  document.querySelector('#signview').style.display ="block"


})
    
    }
  


  })

  //==============================================schedule==============================================//
  document.getElementById("schedule").addEventListener('click', (ev)=>{
        ev.preventDefault();
        var usernamedisplay = document.getElementById("navbardrop")
    if(window.getComputedStyle(usernamedisplay).display === "block"){
      window.location ="./schedule.html"
    }
    else{
        link = "schedule"
        sessionStorage.setItem("link",link)
    // alert("sdfdfdf")
    Swal.fire({
 
 text: "Kindly signin",
 

 confirmButtonColor: '#3085d6',
 
 confirmButtonText: 'OK'
}).then((result) => {
  document.querySelector('#signview').style.display ="block"


})
    }

  })
  

//===========================================================================//
function getQString(url='', keyToReturn=''){
        url = url ? url : location.href;
        let queryStrings = decodeURIComponent(url).split('#', 2)[0].split('?', 2)[1];
        
        if(queryStrings){
            let splittedQStrings = queryStrings.split('&');
            
            if(splittedQStrings.length){
                let queryStringObj = {};
                
                splittedQStrings.forEach(function(keyValuePair){
                    let keyValue = keyValuePair.split('=', 2);
                    
                    if(keyValue.length){
                        queryStringObj[keyValue[0]] = keyValue[1];
                    }
                });            
                
                return keyToReturn ? (queryStringObj[keyToReturn] ? queryStringObj[keyToReturn] : null) : queryStringObj;
            }
            
            return null;
        }
        
        return null;
    }
    //==============================================generate random string===========================================//
    function generateRandomString(){
        return Math.random().toString(36).slice(2).substring(0, 15);
    }
    //===============================================================================================================//


  function signup(){
    window.location = "./singup.html";
  }
 


 //======================================sign in====================================================================// 
  $('#signin1').click(function(e){
    e.preventDefault();
    document.getElementById("signup").disabled =true
  console.log("entering++++")

  sessionStorage.setItem("email",$("#email").val())
  sessionStorage.setItem("password", $("#password").val())

var obj ={
  email: $("#email").val(),
  password : $("#password").val(),

}
$.ajax({
                type: "post",
                // url:"https://rapidqube-conference.herokuapp.com/signin",
                url:"https://rapidqube-conference.herokuapp.com/signin",

                data: JSON.stringify(obj),
                contentType: 'application/json',
                

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  console.log(result,"dfdsffffffffffffff")

                  if(result.result=="Incorrect user name or password"){
                      console.log("coming inside")
                      Swal.fire(result.result)
                    

                  }
                  else{

                  
                    var wholeresponse = result.result;
                    console.log(wholeresponse,"wholeresponse=====>>>>")
                    var firstname = wholeresponse.firstname;
                    var lastname = wholeresponse.lastname;
                    var roomName = wholeresponse.groupname;
                    var id = wholeresponse._id;
                    let meetingid = wholeresponse.meetingID;
                    let url = wholeresponse.url;

                    document.getElementById('navbardrop').innerHTML=firstname +" "+ lastname;
                    document.getElementById('navbardrop').style.display ="block"
                    document.querySelector('#signinpopup').style.display ="none"

                    document.getElementById("signview").style.display ="none"


                    
                    // window.location.href ="/userpage.html"
                    sessionStorage.setItem("usernames",firstname)
                    sessionStorage.setItem("meetingid",meetingid)
                    sessionStorage.setItem("url",url)



                      // Swal.fire(result.result)
                       roomLink = `${location.origin}?room=${roomName.trim().replace(' ', '_')}_${generateRandomString()}/?${id}`;
                       console.log(roomLink,"roomlink+++++++")
                      //  socket.emit("roomlink",roomLink)
                      if(sessionStorage.getItem("link") == "host"){
                       document.querySelector('#room-created').innerHTML = `Room successfully created. Click <a href='${roomLink}' onclick="mytest( '${roomLink}','${id}')">here</a> to enter room. 
                Share the room link <a href=""> ${roomLink}</a> with your partners.`;
                       $('#myModal').modal({
    backdrop: 'static',
    keyboard: false
})
$('#myModal').modal('show');

   
  sessionStorage.removeItem("link")


}

else if(sessionStorage.getItem("link")=="schedule"){
  sessionStorage.removeItem("link")

  window.location ="./schedule.html"
}





  

                  }
                 
                  
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                    
                }
            })
            return false;






  })
  function mytest(roomLink,id){
    sessionStorage.setItem("room",roomLink)
    
    obj ={
      roomlink : roomLink,
      id : id
    }
    $.ajax({
                type: "post",
                //  url:"https://rapidqube-conference.herokuapp.com/startmeeting",
                url:"https://rapidqube-conference.herokuapp.com/startmeeting",

                
                data: JSON.stringify(obj),
                contentType: 'application/json',
                

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  console.log(result,"dfdsffffffffffffff+++++++++++++++++++++")
                }

                
                })
  }
</script>

<style>
  .responsive {
    width: 100%;
    height: auto;
  }
  .Privacy {
    height: 22px;
    align-content: center;
    font-family: Roboto;
    font-size: 18px;
    font-weight: 300;
    font-stretch: normal;
    font-style: normal;
    line-height: 1.22;
    letter-spacing: normal;
    text-align: left;
    color: #ffffff;
    padding-right: 50px;
    padding-left: 50px;
    padding-top: 10px;
    align-self: center;
}
.v1 {
  border-left: 2px solid grey;
  height: 25px;
  align-self: center;
}







  </style>  
      
      
      
</body>
</html>