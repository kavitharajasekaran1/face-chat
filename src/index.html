
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <!-- <script src='/socket.io/socket.io.js'></script> -->
    <!-- <script type="module" src='assets/js/rtc.js'></script>
    <script type="module" src='assets/js/events.js'></script> -->

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
      

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"  crossorigin="anonymous">
    <link rel='stylesheet' href='assets/css/app.css' type="text/css">


    <script src="https://code.jquery.com/jquery-3.1.1.min.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</head>
<body>
    <div class="">
       
       
           
            <nav>
                <div class="nav-wrapper" style="background-color:white;">
                    <img src="./assets/images/Group 548@3x.png"
                    srcset="img/group-548@2x.png 2x,
                            img/group-548@3x.png 3x"
                    class="Group-548"> 
                    <!-- <a href="#" class="brand-logo">Logo</a> -->
                    <ul id="nav-mobile" class="right hide-on-med-and-down">
                      <li><a href="sass.html" style="font-size: 20px;color: black;" class="active">JOIN A MEETING</a></li>
                    <li><a href="badges.html" style="font-size: 20px;color: black;">HOSTING A MEETING</a></li>
                    
                    <li><a href="badges.html" style="font-size: 20px;color: black;">SCHEDULE A MEETING</a></li>
                  </ul>
                </div>
              </nav>
              <div class="hero-image">
            </div>











            <div >
            
            <div class="row col-md-12 ">
              
              <div  class="my-5 ml-5"><p class="Be-together-in-the-moment" style="top:20px"><b>BE TOGETHER  IN THE MOMENT</b> </p>
                <p class="ml-2" style="font-size: 20px;">Simple, high quality video calls on Android phones, iPhones, tablets,<br/> 
                  computers, and Smart Displays like the Google Nest Hub Max.</p>
                  <br/>
                  <div class="row ml-5 col-md-12">
                    <div class="col text-center">                     
                      <img src="assets/images/Group 545@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;">Set up group for your Meeting</p>

                      <a href="" >know more</a>

                      </div>
                      <div class="col text-center"> 
                      <img src="assets/images/Group 546@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;">Send a files, photos and videos</p>
                      <a href="" >know more</a>
                      </div>
                      <div class="col text-center"> 
                      <img src="assets/images/Group 547@2x.png" class="Group-545" hspace="60" >
                      <p style="padding: 25px;" >Your calls and messages stay private </p>                      
                      <a href="">know more</a>
                      </div>
                    </div>
                  
                   
                  
                  
                  
                </div>
               
        
                <div class="col-md-3 offset-md-8" style=" position: absolute;;
                top:-30%">
                  <div class="card form-holder">
          <div class="card-body">
            <br/>
                  <h3>Welcome to face chat</h3>
                  <form   id="contactForm1">
                    <div class="form-group">
                      <input type="text" name="" id="email" class="form-control" placeholder="Email id"/>
                    </div>
                    <div class="form-group">
                      <input type="password" name="" id="password" class="form-control" placeholder="Password"/>
                    </div>
                   

                    



                    <div class="row col-md-12">

                        <div class="col-sm-6">
                           <input type="checkbox" value="lsRememberMe"  style="color: #000; " id="rememberMe"/> <label for="rememberMe">Remember me</label>

                        </div>
                        <label style="float:right;font-size:12px; cursor:pointer;" onClick="">Forgot Password?</label>
                      </div>
                    
                  
                    <div class="wrapper">
                        <button style="width: 250px;height: 50px;"class="btn btn-primary" id="signin1"  >Sign in</button>
                    </div> 
                    <br/>
                    <div class="wrapper">

                    <h4 style="align-self: center;" onclick="signup()">SIGN UP</h4>
                    </div>
                    <div class="separator">or</div>
                    <div class="wrapper">
                        <button style="width: 250px;height: 50px;background-color: white;color: black;" class="btn">JOIN A MEETING</button>
                    </div> 
                  </div>
                </form>
                    </div>
                  </div>
                 

                </div>
                <div  class="" style="margin-top: -190px;">
                  <img src="assets/images/wave@3x.png" class="responsive">
                  <!-- Footer -->
                

<!-- Footer -->
  
                </div>
                <footer class="footer bg-dark" style="padding:.5%">
                  
                  <div class="col-xl">
                    <div class="row">
                      <div class="float-left">
                        <img src="assets/images/Group 4.png">
                      </div>
                      <div class="col-sm-2">
                        
                      </div>
                      <div class="col-lg">
                        <div class="row"><p class="Privacy">Privacy</p> <div class="v1"></div> <p class="Privacy">Terms</p> <div class="v1"></div> <p class="Privacy">About</p> <div class="v1"></div> <p class="Privacy">FaceChat</p> <div class="v1"></div> <p class="Privacy">Help</p>  <div class="v1"></div>  <p class="Privacy">FAQ's</p></div>
                      </div>
                      <div class="float-right">
                        <img src="assets/images/sort.png">
                      </div>
                      
                    </div>
                  </div>
                </footer>
              

               
              
              </div>
            </div>

             




               
          

               
              </div>



              <div class="modal" id="myModal">
                <div class="modal-dialog  modal-dialog-centered">
                  <div class="modal-content">
                  
                    <div class="modal-header">
                      <!-- <h4 class="modal-title">Users Status</h4> -->
                      <button type="button" class="close" data-dismiss="modal">Ã—</button>
                      <!-- <button class="close modalMinimize"> <i class='fa fa-minus'></i> </button> -->
                    </div>
                    
                    <div class="modal-body">
                      <div class="col-12 text-center" id='room-created'></div>

                      
                     
                    </div>
                    
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
              
                  </div>
                </div>  
              </div>



              
     
      
<!-- </div> -->


<script>
  // var socket =io()
//===========================================================================//
function getQString(url='', keyToReturn=''){
        url = url ? url : location.href;
        let queryStrings = decodeURIComponent(url).split('#', 2)[0].split('?', 2)[1];
        
        if(queryStrings){
            let splittedQStrings = queryStrings.split('&');
            
            if(splittedQStrings.length){
                let queryStringObj = {};
                
                splittedQStrings.forEach(function(keyValuePair){
                    let keyValue = keyValuePair.split('=', 2);
                    
                    if(keyValue.length){
                        queryStringObj[keyValue[0]] = keyValue[1];
                    }
                });            
                
                return keyToReturn ? (queryStringObj[keyToReturn] ? queryStringObj[keyToReturn] : null) : queryStringObj;
            }
            
            return null;
        }
        
        return null;
    }
    //==============================================generate random string===========================================//
    function generateRandomString(){
        return Math.random().toString(36).slice(2).substring(0, 15);
    }
    //===============================================================================================================//


  function signup(){
    window.location = "./singup.html";
  }
  
  $('#signin1').click(function(e){
    e.preventDefault();
  console.log("entering++++")

var obj ={
  email: $("#email").val(),
  password : $("#password").val(),

}
$.ajax({
                type: "post",
                url:"http://localhost:3000/signin",
                data: JSON.stringify(obj),
                contentType: 'application/json',
                

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  console.log(result,"dfdsffffffffffffff")

                  if(result.result=="Incorrect user name or password"){
                      console.log("coming inside")
                    
                      Swal.fire({
 
 text: result.result,
 

 confirmButtonColor: '#3085d6',
 
 confirmButtonText: 'OK'
}).then((result) => {
 if (result.value) {
 window.location.href ="/index.html"
 }
})
                  }
                  else{
                    var wholeresponse = result.result;
                    console.log(wholeresponse,"wholeresponse=====>>>>")
                    var firstname = wholeresponse.firstname;
                    var roomName = wholeresponse.groupname;
                    var id = wholeresponse._id;
                    
                    // window.location.href ="/userpage.html"
                    sessionStorage.setItem("username",firstname)

                      // Swal.fire(result.result)
                       roomLink = `${location.origin}?room=${roomName.trim().replace(' ', '_')}_${generateRandomString()}/?${id}`;
                       console.log(roomLink,"roomlink+++++++")
                      //  socket.emit("roomlink",roomLink)
                       document.querySelector('#room-created').innerHTML = `Room successfully created. Click <a href='${roomLink}' onclick="mytest( '${roomLink}','${id}')">here</a> to enter room. 
                Share the room link <a href=""> ${roomLink}</a> with your partners.`;
                       $('#myModal').modal('show');
    if (!($('.modal.in').length)) {
    $('.modal-dialog').css({
      // top: 0,
      // left: 0
    });
  }
  // $('#myModal').modal({
  //   backdrop: false,
  //   show: true
  // });

                  }
                 
                  
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                    
                }
            })
            return false;






  })
  function mytest(roomLink,id){
    sessionStorage.setItem("room",roomLink)
    obj ={
      roomlink : roomLink,
      id : id
    }
    $.ajax({
                type: "post",
                url:"http://localhost:3000/startmeeting",
                data: JSON.stringify(obj),
                contentType: 'application/json',
                

                success: function(response) {
                  console.log(response,"response>>>>>")
                  var result = response
                  console.log(result,"dfdsffffffffffffff+++++++++++++++++++++")
                }

                
                })
  }
</script>

<style>
  .responsive {
    width: 100%;
    height: auto;
  }
  .Privacy {
    height: 22px;
    align-content: center;
    font-family: Roboto;
    font-size: 18px;
    font-weight: 300;
    font-stretch: normal;
    font-style: normal;
    line-height: 1.22;
    letter-spacing: normal;
    text-align: left;
    color: #ffffff;
    padding-right: 50px;
    padding-left: 50px;
    padding-top: 10px;
    align-self: center;
}
.v1 {
  border-left: 2px solid grey;
  height: 25px;
  align-self: center;
}

  </style>  
      
      
      
</body>
</html>